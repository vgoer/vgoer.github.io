(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{616:function(s,e,a){"use strict";a.r(e);var r=a(1),t=Object(r.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("center",[s._v("Composer")]),s._v(" "),a("p",[s._v("[toc]")]),s._v(" "),a("h2",{attrs:{id:"composer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#composer"}},[s._v("#")]),s._v(" composer")]),s._v(" "),a("blockquote",[a("p",[s._v("Composer是 PHP 用来管理依赖（dependency）关系的工具，也就是一个安装"),a("strong",[s._v("包管理工具")]),s._v("。")])]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://packagist.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Packagist 英文官网"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://docs.phpcomposer.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("composer文档"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.phpcomposer.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("composer官网"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://pkg.phpcomposer.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Packagist中国全量镜像"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://mirrors.aliyun.com/composer/",target:"_blank",rel:"noopener noreferrer"}},[s._v("阿里镜像源"),a("OutboundLink")],1)])]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.p2hp.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("php中文站"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("strong",[s._v("下载安装")])]),s._v(" "),a("p",[s._v("下载："),a("a",{attrs:{href:"https://getcomposer.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("composer"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("选择 php版本，修改环境变量")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("我的电脑->属性->高级系统设置->环境变量，在用户变量中添加环境变量\n\nphp -v    //php 版本\ncomposer  //提示\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("修改镜像源")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("github和packagist在国内有时会访问不了，或者速度很慢，这就会导致使用Composer时的各种问题\n还好我们国内有Packagist中国全量镜像和阿里镜像可以解决这个问题\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("全局配置(推荐的方式)")])])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("composer config "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g repo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("packagist composer https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//mirrors.aliyun.com/composer/  //阿里")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("取消全局")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("composer config --unset repos.packagist\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调试"}},[s._v("#")]),s._v(" 调试")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("composer 命令增加 -vvv 可输出详细的信息，命令如下：")]),s._v(" "),a("blockquote",[a("p",[s._v("composer -vvv require alibabacloud/sdk")])])])]),s._v(" "),a("p",[s._v("遇到问题？")]),s._v(" "),a("ol",[a("li",[s._v("建议先将Composer版本升级到最新：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("composer self-update  / composer selfupdate\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("如果想进行版本的回滚，可以使用以下命令：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("composer selfupdate --rollback\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("执行诊断命令：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("composer diagnose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("清除缓存：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("composer clear\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("若项目之前已通过其他源安装，则需要更新 composer.lock 文件，执行命令：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("composer update --lock\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"composer的基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#composer的基本使用"}},[s._v("#")]),s._v(" Composer的基本使用")]),s._v(" "),a("p",[a("strong",[s._v("composer.json")])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("安装完Composer后，想要在项目里开始使用它，你唯一需要做的就是创建一个composer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("json文件。\n这个文件描述了你这个项目所依赖的包以及一些其他的元信息。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("require")])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("通过"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v("这个配置项，我们可以指定项目的依赖\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v("的值是一个对象，对象里的每一个键对应一个依赖\n假设我们项目需要用到monolog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("monolog这个日志库，那么我们可以这样配置composer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("json文件：\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"require"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"monolog/monolog"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"1.0.*"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("strong",[s._v("安装依赖")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("composer会根据上面配置的版本约定下载最新版本的"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("monolog/monolog"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("到默认目录"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("vendor"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("更新依赖")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("更新所有的依赖\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" update\n\n更新某个依赖\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" update monolog/monolog\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("卸载依赖")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("composer remove monolog/monolog\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("composer.lock文件")])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("运行完上面的install命令后，你会发现除了vendor目录，还会多了一个composer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("lock文件\n这个文件保存了项目已经安装的每个包的具体版本\n在运行install命令的时候，如果存在这个文件，则Composer会根据这个文件下载对应版本的包\n这样的好处是可以保证各个环境的依赖的版本一致，否则如果没有这个文件\n每个环境在运行install时可能下载到的版本就不一致了\n所以建议把composer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("lock文件也放到版本控制里\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("Packagist搜索库")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("要下载什么包，可以去 https://packagist.org/ 找一下包名及其版本信息\n\n安装命令也直接搜索出来\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("不需要composer.json文件安装依赖")])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("不需要配置composer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("json文件\n直接使用 composer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" 命令下载类包"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("自动更新composer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("json文件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n下面以下载 phpexcel 为例：\n\ncomposer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require")]),s._v(" phpexcel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("phpexcel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("composer常用命令")])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("composer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("list")]),s._v("    获取帮助信息\ncomposer search    在当前项目中搜索依赖包\ncomposer show    列举所有可用的资源包\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])],1)}),[],!1,null,null,null);e.default=t.exports}}]);